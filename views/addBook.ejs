<%- include("includes/head.ejs")%> <%- include("includes/navigation.ejs",{loggedin})%>

<main>
  <div class="card w-1/3 bg-base-100 shadow-xl mx-auto">
    <div class="card-body items-center text-center">
      <h1 class="text-6xl">Add Book</h1>
      <form
        action="/admin/addBook"
        method="POST"
        class="flex flex-col items-centre"
        enctype="multipart/form-data"
      >
        <input
          type="text"
          name="title"
          placeholder="title"
          class="input input-bordered input-accent w-full max-w-xs my-2"
        />
        <input
          type="file"
          name="image"
          placeholder="select image"
          class="input input-bordered input-accent w-full max-w-xs my-2"
        />

        <select
          name="author"
          id="author"
          class="select select-accent w-full max-w-xs my-2"
        >
          <option disabled selected>Select Author</option>
          <% for (let author of authorlist){ %>
          <option value="<%= author.name %>"><%= author.name %></option>
          <% } %>
        </select>

        <input
          type="text"
          name="price"
          placeholder="price"
          class="input input-bordered input-accent w-full max-w-xs my-2"
        />

        <select
          name="genre"
          id="genre"
          class="input input-bordered input-accent w-full max-w-xs my-2"
        >
          <option disabled selected>Select Genre</option>
          <% for (let genre of genrelist){ %>
          <option value="<%= genre.name %>"><%= genre.name %></option>
          <% } %>
        </select>

        <input
          type="date"
          name="publishDate"
          placeholder="pubishDate"
          class="input input-bordered input-accent w-full max-w-xs my-2"
        />

        <button type="submit" class="btn btn-accent">Add Book</button>
      </form>
    </div>
  </div>
  <% if(validationError){ %>
    <% Object.values(validationError).forEach((error)=>{ %>
    <p class="w-1/4 mx-auto text-center bg-warning border rounded-md text-black mt-2"><%= error.msg %></p>
    <% }) %>
    <% } %>

    <% if(fileError){ %>      
      <p class="w-1/4 mx-auto text-center bg-warning border rounded-md text-black mt-2"><%= fileError %></p>     
      <% } %>
    
</main>

<%- include("includes/footer.ejs")%>
